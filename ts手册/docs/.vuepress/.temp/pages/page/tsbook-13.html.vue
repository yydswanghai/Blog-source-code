<template><div><h1 id="è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#è£…é¥°å™¨" aria-hidden="true">#</a> è£…é¥°å™¨ ğŸ–¼ï¸</h1>
<p>è£…é¥°å™¨ (decorator)</p>
<p>é¢å‘å¯¹è±¡çš„æ¦‚å¿µ (javaï¼šæ³¨è§£ï¼ŒC#ï¼šç‰¹å¾)</p>
<p>ç›®å‰jsæ”¯æŒè£…é¥°å™¨</p>
<h2 id="è§£å†³çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è§£å†³çš„é—®é¢˜" aria-hidden="true">#</a> è§£å†³çš„é—®é¢˜</h2>
<p>è£…é¥°å™¨ï¼Œèƒ½å¤Ÿå¸¦æ¥é¢å¤–çš„ä¿¡æ¯é‡ï¼Œå¯ä»¥è¾¾åˆ°åˆ†ç¦»å…³æ³¨ç‚¹çš„ç›®çš„</p>
<ul>
<li>ä¿¡æ¯ä¹¦å†™ä½ç½®çš„é—®é¢˜</li>
<li>é‡å¤ä»£ç çš„é—®é¢˜</li>
</ul>
<p>ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜äº§ç”Ÿçš„æ ¹æºï¼šæŸäº›ä¿¡æ¯åœ¨å®šä¹‰æ—¶ï¼Œèƒ½å¤Ÿé™„åŠ çš„ä¿¡æ¯é‡æœ‰é™</p>
<p>è£…é¥°å™¨çš„ä½œç”¨ï¼šä¸ºæŸäº›å±æ€§ã€ç±»ã€å‚æ•°ã€æ–¹æ³•æä¾›å…ƒæ•°æ®ä¿¡æ¯ (metadata)</p>
<p>å…ƒæ•°æ®ï¼šæè¿°æ•°æ®çš„æ•°æ®ï¼Œç±»æ¯”htmlé‡Œçš„<code v-pre>&lt;meta&gt;</code>æ ‡ç­¾</p>
<h2 id="è£…é¥°å™¨çš„æœ¬è´¨" tabindex="-1"><a class="header-anchor" href="#è£…é¥°å™¨çš„æœ¬è´¨" aria-hidden="true">#</a> è£…é¥°å™¨çš„æœ¬è´¨</h2>
<p>åœ¨jsä¸­ï¼Œè£…é¥°å™¨æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚(è£…é¥°å™¨æ˜¯è¦å‚ä¸è¿è¡Œçš„)</p>
<p>è£…é¥°å™¨å¯ä»¥ä¿®é¥°ï¼š</p>
<ul>
<li>ç±»</li>
<li>æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ï¼‰</li>
<li>å‚æ•°</li>
</ul>
<h2 id="ç±»è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#ç±»è£…é¥°å™¨" aria-hidden="true">#</a> ç±»è£…é¥°å™¨</h2>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>ç±»è£…é¥°å™¨çš„æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç±»æœ¬èº« (æ„é€ å‡½æ•°æœ¬èº«)</p>
</div>
<p>ä½¿ç”¨è£…é¥°å™¨ï¼š</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">å¾—åˆ°ä¸€ä¸ªå‡½æ•°</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="åœ¨tsä¸­-å¦‚ä½•çº¦æŸä¸€ä¸ªå˜é‡ä¸ºç±»" tabindex="-1"><a class="header-anchor" href="#åœ¨tsä¸­-å¦‚ä½•çº¦æŸä¸€ä¸ªå˜é‡ä¸ºç±»" aria-hidden="true">#</a> åœ¨TSä¸­ï¼Œå¦‚ä½•çº¦æŸä¸€ä¸ªå˜é‡ä¸ºç±»ï¼Ÿ</h3>
<ol>
<li><code v-pre>Function</code></li>
<li><code v-pre>new (å‚æ•°) =&gt; object</code></li>
</ol>
<p>åœ¨TSä¸­è¦ä½¿ç”¨è£…é¥°å™¨ï¼Œè¦åœ¨<code v-pre>tsconfig.json</code>é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="language-json ext-json line-numbers-mode"><pre v-pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è£…é¥°å™¨å‡½æ•°çš„è¿è¡Œæ—¶é—´ï¼šåœ¨ç±»å®šä¹‰åç›´æ¥è¿è¡Œ (å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹tscç¼–è¯‘åçš„jsä¼šå‘ç°ï¼Œåœ¨ç±»å®šä¹‰ä¸‹é¢ä¼šè¿è¡Œä¸€ä¸ª<strong>è£…é¥°å™¨çš„å‡½æ•°</strong>)</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token comment">// è¿™é‡Œtarget çº¦æŸä¸ºä¸€ä¸ªæ— å‚çš„ç±»æ„é€ å‡½æ•°</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// [class User]</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç±»è£…é¥°å™¨å¯ä»¥å…·æœ‰çš„è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#ç±»è£…é¥°å™¨å¯ä»¥å…·æœ‰çš„è¿”å›å€¼" aria-hidden="true">#</a> ç±»è£…é¥°å™¨å¯ä»¥å…·æœ‰çš„è¿”å›å€¼</h3>
<ol>
<li>voidï¼šä»…è¿è¡Œå‡½æ•°</li>
<li>è¿”å›ä¸€ä¸ªæ–°çš„ç±»ï¼šä¼šå°†æ–°çš„ç±»æ›¿æ¢æ‰è£…é¥°ç›®æ ‡</li>
</ol>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>å°æŠ€å·§ï¼š<code v-pre>new () =&gt; object</code>ä½¿ç”¨å‰©ä½™å‚æ•°</p>
</div>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
        <span class="token keyword">public</span> age<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p>
<p>å¤šä¸ªè£…é¥°å™¨ç»„åˆï¼šä¼šæŒ‰ç…§ååŠ å…¥å…ˆè°ƒç”¨çš„é¡ºåºè¿›è¡Œè°ƒç”¨ã€‚</p>
</div>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">constructor</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> object
<span class="token keyword">function</span> <span class="token function">d1</span><span class="token punctuation">(</span>target<span class="token operator">:</span> constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">d2</span><span class="token punctuation">(</span>target<span class="token operator">:</span> constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">d2</span></span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">d1</span></span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// => d1</span>
<span class="token comment">// => d2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…ˆè¿è¡Œå‡½æ•°ä»ä¸Šè‡³ä¸‹d2()ã€d1()ï¼Œå¾—åˆ°ä¸¤ä¸ªè£…é¥°å™¨ï¼Œç„¶åè¿è¡Œè£…é¥°å™¨</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">constructor</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> object
<span class="token keyword">function</span> <span class="token function">d1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d1'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d1 decorator'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">d2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d2'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d2 decorator'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">d2</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">d1</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡º</span>
<span class="token comment">// => d2</span>
<span class="token comment">// => d1</span>
<span class="token comment">// => d1 decorator</span>
<span class="token comment">// => d2 decorator</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æˆå‘˜è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#æˆå‘˜è£…é¥°å™¨" aria-hidden="true">#</a> æˆå‘˜è£…é¥°å™¨</h2>
<h3 id="å±æ€§" tabindex="-1"><a class="header-anchor" href="#å±æ€§" aria-hidden="true">#</a> å±æ€§</h3>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>å±æ€§è£…é¥°å™¨ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¦‚æœæ˜¯é™æ€å±æ€§ï¼Œåˆ™ä¸ºç±»æœ¬èº«ï¼Œå¦‚æœæ˜¯å®ä¾‹å±æ€§ï¼Œåˆ™ä¸ºç±»çš„åŸå‹</li>
<li>å›ºå®šä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå±æ€§å</li>
</ol>
</div>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span>target<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> target <span class="token operator">===</span> <span class="token constant">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æµ‹è¯•è®°å¾—æ³¨é‡Š "strictNullChecks": true</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">d</span></span>
    prop1<span class="token operator">:</span> <span class="token builtin">string</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">d</span></span>
    prop2<span class="token operator">:</span> <span class="token builtin">string</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">d</span></span>
    <span class="token keyword">static</span> prop3<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">// {} true 'prop1'</span>
<span class="token comment">// {} true 'prop2'</span>
<span class="token comment">// [class A] false 'prop3'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•" aria-hidden="true">#</a> æ–¹æ³•</h3>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>æ–¹æ³•è£…é¥°å™¨ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼Œåˆ™ä¸ºç±»æœ¬èº«ï¼Œå¦‚æœæ˜¯å®ä¾‹æ–¹æ³•ï¼Œåˆ™ä¸ºç±»çš„åŸå‹</li>
<li>å›ºå®šä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ–¹æ³•å</li>
<li>å±æ€§æè¿°å¯¹è±¡</li>
</ol>
</div>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">d</span><span class="token punctuation">(</span>target<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">d</span></span>
    <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// {} 'method1' {</span>
<span class="token comment">//      value: [Function: method1],</span>
<span class="token comment">//      writable: true,</span>
<span class="token comment">//      enumerable: false,</span>
<span class="token comment">//      configurable: true</span>
<span class="token comment">// }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒä¸€ä¸ªä½ç½®ä¸Šå¯ä»¥ä½¿ç”¨å¤šä¸ªè£…é¥°å™¨</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">enumrable</span><span class="token punctuation">(</span>target<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span>enumerable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">// è®©æ–¹æ³•å¯ä»¥è¢«éå†</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">useless</span><span class="token punctuation">(</span>target<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> descriptor<span class="token operator">:</span> PropertyDescriptor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"è¯¥æ–¹æ³•å·²è¿‡æœŸ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">enumrable</span></span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">useless</span></span>
    <span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'method1'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">enumrable</span></span>
    <span class="token function">method2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">A</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token comment">// method1 method2</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span><span class="token function">method1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// method1è¯¥æ–¹æ³•å·²è¿‡æœŸ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“" aria-hidden="true">#</a> å¸¸ç”¨ç¬¬ä¸‰æ–¹åº“</h2>
<h3 id="reflect-metadata" tabindex="-1"><a class="header-anchor" href="#reflect-metadata" aria-hidden="true">#</a> reflect-metadata</h3>
<p>è¯¥åº“çš„ä½œç”¨ï¼šä¿å­˜å…ƒæ•°æ®</p>
<h3 id="class-validator" tabindex="-1"><a class="header-anchor" href="#class-validator" aria-hidden="true">#</a> class-validator</h3>
<p>è¯¥åº“çš„ä½œç”¨ï¼šç±»éªŒè¯</p>
<h3 id="class-transformer" tabindex="-1"><a class="header-anchor" href="#class-transformer" aria-hidden="true">#</a> class-transformer</h3>
<p>è¯¥åº“çš„ä½œç”¨ï¼šå°†å¹³é¢å¯¹è±¡è½¬æ¢æˆç±»</p>
<h2 id="å‚æ•°è£…é¥°å™¨" tabindex="-1"><a class="header-anchor" href="#å‚æ•°è£…é¥°å™¨" aria-hidden="true">#</a> å‚æ•°è£…é¥°å™¨</h2>
<div class="custom-container tip"><p class="custom-container-title">TIP</p>
<p>å‚æ•°è£…é¥°å™¨ï¼šéœ€è¦åœ¨ ä¾èµ–æ³¨å…¥ (ä¾èµ–å€’ç½®) ä¸‹æ‰èƒ½å‘æŒ¥ä½œç”¨</p>
<p>è¦æ±‚å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>å¦‚æœæ–¹æ³•æ˜¯é™æ€çš„ï¼Œåˆ™ä¸ºç±»æœ¬èº«ï¼›å¦‚æœæ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼Œåˆ™ä¸ºç±»çš„åŸå‹</li>
<li>æ–¹æ³•åç§°</li>
<li>åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•</li>
</ol>
</div>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> method<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// {} sum 1</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyMath</span> <span class="token punctuation">{</span>
    <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token decorator"><span class="token at operator">@</span><span class="token function">test</span></span> b<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="tsè‡ªåŠ¨æ³¨å…¥çš„å…ƒæ•°æ®" tabindex="-1"><a class="header-anchor" href="#tsè‡ªåŠ¨æ³¨å…¥çš„å…ƒæ•°æ®" aria-hidden="true">#</a> TSè‡ªåŠ¨æ³¨å…¥çš„å…ƒæ•°æ®</h2>
<p>å¦‚æœå®‰è£…äº†<code v-pre>reflect-metadata</code>ï¼Œå¹¶ä¸”å¯¼å…¥äº†è¯¥åº“ï¼Œå¹¶ä¸”åœ¨æŸä¸ªæˆå‘˜ä¸Šæ·»åŠ äº†å…ƒæ•°æ®ï¼Œå¹¶ä¸”å¯ç”¨äº†å¦‚ä¸‹<code v-pre>tsconfig.json</code>é…ç½®(ç”Ÿæˆè£…é¥°å™¨çš„å…ƒæ•°æ®)é…ç½®ã€‚</p>
<div class="language-json ext-json line-numbers-mode"><pre v-pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">"emitDecoratorMetadata"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ™TSåœ¨ç¼–è¯‘ç»“æœä¸­ï¼Œä¼šå°†çº¦æŸçš„ç±»å‹ï¼Œä½œä¸ºå…ƒæ•°æ®åŠ å…¥åˆ°å¯¹åº”çš„ä½ç½®ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒTSçš„ç±»å‹æ£€æŸ¥ (çº¦æŸ) å°†æœ‰æœºä¼šåœ¨<strong>è¿è¡Œæ—¶</strong>è¿›è¡Œ</p>
<div class="language-typescript ext-ts line-numbers-mode"><pre v-pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token string">"reflect-metadata"</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">Reflect</span></span><span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span>
    loginId<span class="token operator">:</span> <span class="token builtin">string</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">Reflect</span></span><span class="token punctuation">.</span><span class="token function">metadata</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>
